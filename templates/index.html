{% extends 'base.html' %}
{% block title %}
  SchoolBuzzer
{% endblock %}

{% block content %}
  <h2 class="centralizado mt-4">Bem-vindo(a) ao Sistema da Campainha</h2>

  <section class="mt-4">
    <h3 class="centralizado mb-4">Agendamentos já cadastrados</h3>

    {% if alarms %}
      <div class="tabela-wrapper">
        <table>
          <thead>
            <tr>
              <th>Tipo</th>
              <th>Horário</th>
              <th>Dias</th>
              <th>Período</th>
              <th>Ações</th>
            </tr>
          </thead>
          <tbody>
            {% for alarm in alarms %}
              <tr>
                <td>{{ alarm.get_event_type_display }}</td>
                <td>{{ alarm.time|time:'H:i' }}</td>
                <td>{{ alarm.days_of_week }}</td>
                <td>{{ alarm.start_date }} → {{ alarm.end_date }}</td>
                <td>
                  <a href="{% url 'app:alarm-update' alarm.pk %}" class="btn btn-sm">Editar</a>
                  <a href="{% url 'app:alarm-delete' alarm.pk %}" class="btn btn-sm">Excluir</a>
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    {% else %}
      <p class="centralizado">Nenhum agendamento cadastrado.</p>
    {% endif %}

    <div class="centralizado mt-3">
      <a href="{% url 'app:alarm-create' %}" class="btn">Criar novo Agendamento</a>
    </div>
  </section>

  <a href="{% url 'app:ring-now' %}" class="btn btn-danger ring-btn" title="Tocar Campainha"><i class="fas fa-bell fa-lg"></i></a>

  {% endblock %}